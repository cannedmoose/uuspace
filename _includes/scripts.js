function createCursors(selector,splitter){let styleEl=document.createElement("style");document.querySelector("head").appendChild(styleEl);let maxChunk=0;document.querySelectorAll(selector).forEach(el=>{if(el.firstElementChild)return;let split=splitter(el.innerText);let elHTML="";for(i=0;i<split.length;i++){let chunk=split[i];if(chunk.length>maxChunk)maxChunk=chunk.length;let chunkHTML="";for(j=0;j<chunk.length;j++){chunkHTML+=`<span>${chunk.charAt(j)}</span>`}elHTML+=`<span class="curs0r">${chunkHTML}</span>`}el.innerHTML=elHTML});let blanker=`\n\t\t\t${selector} > .curs0r > * {\n\t\t\t\tcolor: black;\n\t\t\t\ttext-shadow: none;\n\t\t\t}\n\t\t`;let count=0;let tick=()=>{styleEl.innerHTML=`\n\t\t\t\t${blanker}\n\t\t\t\t${selector} > .curs0r > :nth-child(n + 1):nth-child(-n + ${count}) {\n\t\t\t\t\tcolor: white;\n\t\t\t\t\ttext-shadow: inherit;\n\t\t\t\t}\n\n\t\t\t\t${selector} > .curs0r > :nth-child(${count+1}){\n\t\t\t\t\tbackground-color: white;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tfill: white;\n\t\t\t\t\tbox-shadow: 0px 0px 2px aqua, 0px 0px 10px aqua;\n\t\t\t\t\ttext-shadow: none;\n\t\t\t\t}\n\t\t\t\t`;count+=1;return count>maxChunk};let reset=()=>{count=0;styleEl.innerHTML=`${blanker}`};reset();return{tick:tick,reset:reset}}function animatedCursor(selector,splitter,timeout,doneCallback){let{tick:tick,reset:reset}=createCursors(selector,splitter);let oreset=reset;let handle=undefined;let play=()=>{if(handle){return}handle=window.setInterval(()=>{if(tick()&&handle){window.clearInterval(handle);handle=undefined;if(doneCallback)doneCallback()}},timeout)};reset=()=>{if(handle)window.clearInterval(handle);handle=undefined;oreset()};return{play:play,reset:reset}}
