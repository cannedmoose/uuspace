<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet"
				href="{{ "/assets/main.css" | relative_url }}?id={{ "now" | date: "%s" }}">
	<style>
		{%- include fonts.css -%}
	</style>
	<script>
		{%- include scripts.js -%}
	</script>
	<link rel="shortcut icon" type="image/png" sizes="128x128"
				href="/assets/favicon.png">
	<script>
		function createUUID() {

			let dt = new Date().getTime()

			const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
				const r = (dt + Math.random() * 16) % 16 | 0
				dt = Math.floor(dt / 16)
				return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16)
			})

			return uuid
		}

		{
			const url = "https://script.google.com/macros/s/AKfycbwHdowlbeaSQj05QW1dPYrBauzH-G6VfhBHIKP2fxVtKsCWgyQ/exec";
			const location = window.location.href;
			const screenHeight = window.screen.availHeight;
			const screenWidth = window.screen.availWidth;
			const UA = navigator.userAgent;
			const platform = navigator.platform;
			const touchpoints = navigator.maxTouchPoints;
			const referrer = document.referrer;
			const UUID = window.localStorage.getItem("uuid") || createUUID();
			window.localStorage.setItem("uuid", UUID);

			const data = [UUID, platform, touchpoints, UA, screenHeight, screenWidth, location, referrer];

			fetch(url, {
				method: "POST", body: JSON.stringify(data), headers: {
					'Content-Type': 'application/json'
				},
				redirect: 'follow',
				mode: "no-cors"
			}).then(resp => console.log(resp.body))
		}
	</script>
	<title>{{page.title}} | {{ site.title }}</title>
</head>
