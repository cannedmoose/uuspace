---
layout: default
title: home
---
<script>
	function resetTypewriter() {
		document.querySelectorAll(".typewriter").forEach(el => {
			el.classList.remove("showing");
			el.classList.add("toshow");

			el.dataset.count = 0;
		})
	}

	window.addEventListener('DOMContentLoaded', (event) => {
		// Add styler element for nth-child based reveal.
		let s = document.createElement("style");
		s.setAttribute("id", "styler");
		document.querySelector("html").appendChild(s);

		// Spanify all the text
		document.querySelectorAll(".typewriter").forEach(el => {
			let text = el.innerText;
			let h = ""
			for (var i = 0; i < text.length; i++) {
				let c = text.charAt(i);
				h += `<span>${c}</span>`
			}
			h += `<span class="endline">.</span>`
			el.setAttribute("data-text", text);
			el.innerHTML = h;
		})

		if (!window.localStorage.getItem("hideTerminal")) {
			resetTypewriter()
		} else {
			document.querySelector(".refresh").classList.remove("hidden");
		}

		document.querySelector(".refresh").addEventListener("click", () => {
			document.querySelector(".refresh").classList.add("hidden");
			//window.localStorage.removeItem("hideTerminal");
			resetTypewriter();
			// TODO(P1) track typewriter to make sure one isn't allready running
			typeWriter();
		})
	});

	function typeWriter() {
		window.requestAnimationFrame(() => {
			let el = document.querySelector(".toshow");
			if (!el) {
				window.localStorage.setItem("hideTerminal", "true");
				document.querySelector(".refresh").classList.remove("hidden");
				return;
			}

			let count = parseInt(el.dataset.count || "0");
			let text = el.dataset.text;

			let styler = document.querySelector("#styler")

			// Note text also includes cursor character
			if (count > text.length) {
				console.log("Line done");

				el.classList.remove("toshow");

				styler.textContent = `
				.showing span:last-child {
					animation: blink-caret 1.5s step-end infinite;
					opacity: 1;
					background-color: white;
					fill: white;
					box-shadow: 0px 0px 2px aqua, 0px 0px 10px aqua;
					text-shadow: none;
				}
		`

				let endDelay = parseInt(el.dataset.endDelay || "1000");
				// Next callback should happen after a certain amount of time...
				window.setTimeout(typeWriter, endDelay);
			}
			else if (count == 0) {
				console.log("Line start");
				if (document.querySelector(".showing")) {
					document.querySelector(".showing").classList.remove("showing")
				}
				el.setAttribute("data-count", count + 1);
				el.classList.add("showing");

				// TODO(P1) CHANGE THESE TO background + shadow so we are consistant.
				styler.textContent = `
				.showing span:first-child{
					opacity: 1;
					background-color: white;
					fill: white;
					box-shadow: 0px 0px 2px aqua, 0px 0px 10px aqua;
					text-shadow: none;
					animation: blink-caret 1.5s step-end infinite;
				}
		`

				let startDelay = parseInt(el.dataset.startDelay || "1500");
				window.setTimeout(typeWriter, startDelay);
			}
			else {
				console.log("letter", count)
				styler.textContent = `
				.showing span:nth-child(n + 1):nth-child(-n + ${count}) {
					opacity : 1;
				}


			.showing span:nth-child(${count + 1}){
					opacity: 1;
					background-color: white;
					fill: white;
					box-shadow: 0px 0px 2px aqua, 0px 0px 10px aqua;
					text-shadow: none;
				}
		`;
				el.setAttribute("data-count", count + 1);
				let letterDelay = parseInt(el.dataset.letterDelay || "50");
				window.setTimeout(typeWriter, letterDelay);
			}
		});
	}
	window.onload = function () {
		// Hack to set --vh to innerHeight * 0.01;
		let vh = window.innerHeight * 0.01;
		document.documentElement.style.setProperty('--vh', `${vh} px`);
		if (!window.localStorage.getItem("hideTerminal")) {
			typeWriter();
			window.localStorage.setItem("hideTerminal", "true");
		}
	}
</script>
<div class="tagline glow">
	<h1><span class="typewriter" data-letter-delay="100">Callan
			McNamara</span>
	</h1>
	<p><span class="glow typewriter" data-end-delay="100" data-letter-delay="10"> I'm a
			Sydney based freelance developer with a passion for creating amazing online
			spaces. I offer
			full service design and development of websites and
			web apps across a range of technologies.</span></p>

	<p><span class="glow typewriter" data-start-delay="2500" data-end-delay="100"
					data-letter-delay="10">
			Interested in working together? Contact</span><a href="/contact"><span
						class="glow typewriter email" data-end-delay="100"
						data-letter-delay="100">me@u-u.space</span></a>
	</p>

	<p><span class="glow typewriter" data-end-delay="100" data-letter-delay="20">I can help
			with</span></p>
	<p><a href="/web-site" class="glow typewriter" data-letter-delay="20">Website Design and
			Development</a></p>
	<p><a href="/web-app" class="glow typewriter" data-letter-delay="20">Web Application
			Development</a></p>
	<p><a href="/infra" class="glow typewriter" data-letter-delay="20">Hosting and Infrastructure
			Management</a></p>
	<p><a href="/analytics" class="glow typewriter" data-letter-delay="20">SEO and Web Analytics</a>
	</p>
	<div class="refresh hidden">
		<span class="demo-icon">&#xe800;</span>
	</div>
</div>
